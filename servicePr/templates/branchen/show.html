{% extends 'home_show.html' %}
{% load staticfiles %}

{% block title %}
<hr>
    <h2>{{ title }}</h2>
<hr>
   {% if anz == 0 %}
        <div class="container">
            <br><br>
            <h3>Zurzeit keine Eintr√§ge!</h3>
        </div>
    {% endif %}
{% endblock %}

{% block body %}
    {% include 'nav/googleMarker.html' %}
<body onload="loadMap()">
    <div class="container" style="margin-top:100px;">
        <form method="POST" action="">{% csrf_token %}
           {% if form %}
            <div class="col-xs-12 col-md-3 thumbnail" style="margin-top:5px; max-width:320px; float:left;">
                {{ form }}
                    <div class="container thumbnail" style="max-width:100%; margin-top:20px;">
                        <h4>Anfrage senden an:</h4>
                        {% for firma in firma %}
                            <strong id="str">
                               <a><p id="{{ firma.id }}" style="background-color:grey; color:white; border-radius:3px; max-width:250px; text-align:center;"></p></a>
                            </strong>
                        {% endfor %}
                    </div>
                <input type="submit" value="senden" />
            </div>
           {% endif %}
        </form>
            {% for firma in firma %}
                 <div class="col-xs-6 col-md-3" >
                    <div class="thumbnail" style="border:none;">
                        <div class="thumbnail" style="width:100%; height:100px;">
                            <img src='{{ firma.firm_logo.url }}' class="img-responsive" alt="Responsive image" style="max-height:100%;" />
                        </div>
                        <div class="thumbnail">
                            <a tabindex="0" role="button" data-toggle="popover" data-trigger="focus" title="{{ firma.firm_name }}" data-content="{{ firma.firm_beschreibung }}" />
                                <img src="{% static 'img/infoIcon.png' %}" style="max-height:50px; margin-right:1px;"/>
                            </a>
                            <p>{{ firma.firm_name }}</p>
                            <p>{{ firma.firm_adress }}</p>
                            <p>{{ firma.firm_plz }} {{ firma.firm_ort }}</p>
                            <p><small>mehr Infos - </small><a href="firma.firm_homepage"><small>{{ firma.firm_homepage }}</small></a></p>
                        </div>
                         <button class="btn" id="{{ firma.firm_name }}" value="{{ firma.firm_name }}" onclick="myFunction(this)">+ {{ firma.firm_name }}</button>
                    </div>
                 </div>
            {% endfor %}
    <div id="pop3"></div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script>
        function myFunction(objValue) {
            var i = 0;
            {% for firma in firma %}
                if("{{ firma.firm_name }}" == objValue.value){
                    e = document.getElementById("{{ firma.id }}")
                    e.innerHTML = "+" + objValue.value;
              }

            {% endfor %}
        }
            $(document).ready(function(){
                $("strong").click(function(){
                    $(this).remove();
            });

            $(function () {
                var options = {'style':'width:200px'};
                $('[data-toggle="popover"]').popover( options )
               });
         });
    </script>
<div class="container">
    <div class="pagination">
        <span class="step-links">
            {% if firma.has_previous %}
                <a href="?page={{ firma.previous_page_number }}"> < back </a>
            {% endif %}

            <span class="current">
                Seite {{ firma.number }} of {{ firma.paginator.num_pages }}.
            </span>

            {% if firma.has_next %}
                <a href="?page={{ firma.next_page_number }}">next</a>
            {% endif %}
        </span>
    </div>
</div>

</body>
{% endblock %}>


